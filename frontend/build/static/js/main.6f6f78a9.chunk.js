(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){e.exports=a(27)},22:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(12),o=a.n(r),s=(a(22),a(13)),i=a(2);var c=e=>{let{label:t,options:a,selectedValue:l,onSelect:r}=e;return n.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"22px",marginTop:"12px"}},n.a.createElement("h3",null,t),n.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"22px",marginTop:"22px",justifyContent:"center"}},a.map(e=>n.a.createElement("div",{key:e.value,onClick:()=>r(e.value),style:{padding:"32px 50px",fontSize:"1.0rem",backgroundColor:l===e.value?"#0056b3":"#007bff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s ease"},onMouseOver:e=>{e.target.style.backgroundColor="#ff8400"},onMouseOut:t=>{l===e.value?t.target.style.backgroundColor="#0056b3":t.target.style.backgroundColor="#007bff"}},e.label))))};const u=async()=>{const e=await fetch("http://localhost:8000/api/materials/");return await e.json()};var d=e=>{let{selectedType:t,setSelectedType:a,selectedMaterial:r,setSelectedMaterial:o,selectedSize:s,setSelectedSize:i}=e;const[d,p]=Object(l.useState)([]),[b,g]=Object(l.useState)(!1),[m,h]=Object(l.useState)("");Object(l.useEffect)(()=>{u().then(e=>{const t=e.filter(e=>e.value.startsWith("AL"));console.log("Aluminium subtypes:",t),p(t)})},[]),Object(l.useEffect)(()=>{i("")},[t,i]);const y=(()=>{switch(t){case"ROUND":return[{value:"1",label:"Fi22"},{value:"2",label:"Fi25"},{value:"3",label:"Fi30"},{value:"4",label:"Fi40"},{value:"5",label:"Fi50"}];case"SQUARE":return[{value:"6",label:"40x40"},{value:"7",label:"25x25"},{value:"8",label:"30x30"}];case"RECT":return[{value:"9",label:"30x10"},{value:"10",label:"40x10"},{value:"11",label:"40x20"},{value:"12",label:"50x25"}];case"D_Shape":return[{value:"13",label:"Marcepan"}];default:return[]}})();return n.a.createElement("div",null,n.a.createElement(c,{label:"",options:[{value:"ROUND",label:"Okr\u0105g\u0142a"},{value:"SQUARE",label:"Kwadratowa"},{value:"RECT",label:"Prostok\u0105tny"},{value:"D_Shape",label:"Marcepan"}],selectedValue:t,onSelect:a}),t&&n.a.createElement(c,{label:"",options:y,selectedValue:s,onSelect:i}),n.a.createElement(c,{label:"",options:[{value:"AL",label:"Aluminium"},{value:"A304",label:"304"},{value:"A316",label:"316"},{value:"MS",label:"Mosi\u0105dz"}],selectedValue:r,onSelect:e=>{o(e),g("AL"===e)}}),b&&n.a.createElement("div",{style:{textAlign:"center",marginBottom:"5px"}},n.a.createElement("h3",null,"Wybierz typ aluminium"),n.a.createElement(c,{options:d,selectedValue:m,onSelect:e=>{h(e),o(e)}})))},p=a(28);var b=e=>{let{selectedType:t,selectedMaterial:a,selectedSize:r,onSubmit:o}=e;const[s,i]=Object(l.useState)(""),[c,u]=Object(l.useState)(null),[d,b]=Object(l.useState)(!1),[g,m]=Object(l.useState)([]),[h,y]=Object(l.useState)(null),[f,x]=Object(l.useState)(0);Object(l.useEffect)(()=>{p.a.get("http://127.0.0.1:8000/api/tares/").then(e=>{m(e.data)}).catch(e=>{console.error("Error fetching tares:",e)})},[]);return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:async e=>{e.preventDefault(),b(!0),console.log("Klikni\u0119to Dodaj wag\u0119"),parseFloat(s);const l=h?s-h.weight_kg:s;try{const e={weight_kg:l,material:a,shape:t,size:r};console.log("\ud83d\udce6 Wysy\u0142ane dane:",e),await o(e),i("")}catch(n){console.error("B\u0142\u0105d podczas dodawania wagi:",n),u("B\u0142\u0105d podczas dodawania wagi")}finally{b(!1)}},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"30px"}},n.a.createElement("p",null),n.a.createElement("input",{type:"number",value:s,onChange:e=>{i(e.target.value),h&&x(e.target.value-h.weight_kg)},placeholder:"Wpisz wag\u0119",className:"rounded-md border border-gray-300 px-4 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent",style:{width:"300px",height:"50px",paddingLeft:"15px",paddingRight:"15px",paddingTop:"10px",paddingBottom:"10px",fontSize:"1.5rem"}}),n.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"12px"}},n.a.createElement("h3",null,"Wybierz tar\u0119:"),n.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"22px",marginTop:"12px"}},g.map(e=>n.a.createElement("div",{key:e.id,style:{padding:"12px 24px",fontSize:"0.9rem",backgroundColor:(null===h||void 0===h?void 0:h.id)===e.id?"#0056b3":"#007bff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s ease"},onMouseOver:e=>{e.target.style.backgroundColor="#ff8400"},onMouseOut:t=>{(null===h||void 0===h?void 0:h.id)===e.id?t.target.style.backgroundColor="#0056b3":t.target.style.backgroundColor="#007bff"},onClick:()=>(e=>{y(e),x(s-e.weight_kg)})(e)},e.name)))),n.a.createElement("button",{type:"submit",style:{marginTop:"62px",padding:"12px 24px",fontSize:"1.2rem",backgroundColor:"#ff8400",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s ease"},onMouseOver:e=>e.target.style.backgroundColor="#0056b3",onMouseOut:e=>e.target.style.backgroundColor="#ff8400"},"Dodaj wag\u0119")))};var g=p.a.create({baseURL:"http://127.0.0.1:8000/api/",timeout:5e3,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},withCredentials:!0});var m=e=>{let{entries:t,refreshEntries:a}=e;const[r,o]=Object(l.useState)({}),[s,i]=Object(l.useState)({});Object(l.useEffect)(()=>{u().then(e=>{const t={};e.forEach(e=>{t[e.value]=e.label}),o(t)})},[]),Object(l.useEffect)(()=>{const e=[...new Set(t.map(e=>e.shape))],a=async()=>{const a=await Promise.all(e.map(e=>(async e=>{try{return{shape:e,sizes:(await g.get(`/get-sizes/?shape=${e}`)).data}}catch(t){return console.error(`B\u0142\u0105d pobierania rozmiar\xf3w dla shape=${e}:`,t),{shape:e,sizes:[]}}})(e))),l={};t.forEach(e=>{var t,n;const r=(null===(n=((null===(t=a.find(t=>t.shape===e.shape))||void 0===t?void 0:t.sizes)||[]).find(t=>t.id===e.size))||void 0===n?void 0:n.size_label)||e.size;l[`${e.shape}_${e.size}`]=r}),i(l)};e.length>0&&a()},[t]);return n.a.createElement("div",{className:"recent-entries"},n.a.createElement("ul",{style:{listStyleType:"none",paddingLeft:0}},t.map(e=>n.a.createElement("li",{key:e.id},r[e.material]||e.material," \u2013 ",s[`${e.shape}_${e.size}`]||e.size," \u2013 "," ",e.weight_kg," kg \u2013  "," ",(e=>new Date(e).toLocaleString("pl-PL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}))(e.created_at)," ","   ",n.a.createElement("button",{style:{marginTop:"10px",padding:"7px 10px",fontSize:"0.8rem",backgroundColor:"#ff1900",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s ease"},onClick:()=>(async e=>{try{await g.delete(`/containers/${e}/`),a()}catch(t){console.error("B\u0142\u0105d podczas usuwania wpisu:",t)}})(e.id)},"Usu\u0144")))))};var h=()=>{console.log("\u2705 Komponent HomePage zosta\u0142 za\u0142adowany"),Object(l.useEffect)(()=>{g.get("csrf/").then(()=>{console.log("\u2705 CSRF token pobrany i ustawiony w ciasteczkach")}).catch(e=>{console.error("\u274c B\u0142\u0105d podczas pobierania CSRF tokena:",e)})},[]);const[e,t]=Object(l.useState)(""),[a,r]=Object(l.useState)(""),[o,s]=Object(l.useState)([]),[i,c]=Object(l.useState)(""),u=async()=>{try{const t=(await g.get("/containers/")).data.slice(-5).reverse();s(t)}catch(e){console.error("B\u0142\u0105d podczas pobierania wpis\xf3w:",e)}};Object(l.useEffect)(()=>{u()},[]);return n.a.createElement("div",null,n.a.createElement(d,{selectedType:e,setSelectedType:t,selectedMaterial:a,setSelectedMaterial:r,selectedSize:i,setSelectedSize:c}),n.a.createElement(b,{selectedType:e,selectedMaterial:a,selectedSize:i,onSubmit:async e=>{console.log("Dodano wag\u0119:",e);try{const a=await(async e=>(await g.post("containers/",e)).data)(e);s([a,...o.slice(0,4)])}catch(t){console.error("B\u0142\u0105d przy dodawaniu wagi:",t),alert("Nie uda\u0142o si\u0119 zapisa\u0107 danych. Sprawd\u017a po\u0142\u0105czenie z backendem.")}}}),n.a.createElement(m,{entries:o,refreshEntries:u}))};var y=e=>{let{material:t,shape:a,weight:l,onDelete:r}=e;const o=parseFloat(l);let s;const i={backgroundColor:s=0===o?"green":o>0&&o<10?"yellow":"red",color:"yellow"===s?"black":"white",padding:"20px",margin:"10px",borderRadius:"8px",textAlign:"center",width:"200px",position:"relative"};return n.a.createElement("div",{style:i},n.a.createElement("button",{style:{position:"absolute",top:"5px",right:"5px",background:"black",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",padding:"5px 8px"},onClick:r},"Z\u0142omuj"),n.a.createElement("h3",null,t),n.a.createElement("p",null,"Przekr\xf3j: ",a),n.a.createElement("p",null,"Waga: ",l," kg"))};var f=()=>{const[e,t]=Object(l.useState)([]),a=()=>{fetch("http://localhost:8000/api/containers/summary/").then(e=>e.json()).then(e=>{console.log("Dane z nowego API:",e),t(e)})};Object(l.useEffect)(()=>{a()},[]);return n.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},e.map((e,t)=>n.a.createElement(y,{key:t,material:e.material_name||e.material,shape:e.size_label||e.size_id,weight:e.total_weight_kg||e.total_weight,onDelete:()=>(e=>{fetch(`http://localhost:8000/api/entries/${e}/delete/`,{method:"DELETE"}).then(e=>{e.ok?a():alert("Nie uda\u0142o si\u0119 usun\u0105\u0107 wpisu.")})})(e.id)})))};var x=()=>n.a.createElement("nav",{className:"navbar bg-dark text-white p-3"},n.a.createElement("img",{src:"/logobiale.png",alt:"Logo",style:{height:"100px"}}),"  ");var v=()=>n.a.createElement("footer",{className:"bg-light text-center p-3"},n.a.createElement("p",null,"\xa9 2025 Rura-Z\u0142om App. Wszelkie prawa zastrze\u017cone."));var w=()=>n.a.createElement(s.a,null,n.a.createElement(x,null),n.a.createElement("main",{className:"container my-4"},n.a.createElement(i.c,null,n.a.createElement(i.a,{path:"/summary",element:n.a.createElement(f,null)}),n.a.createElement(i.a,{path:"/",element:n.a.createElement(h,null)}))),n.a.createElement(v,null));var E=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,29)).then(t=>{let{getCLS:a,getFID:l,getFCP:n,getLCP:r,getTTFB:o}=t;a(e),l(e),n(e),r(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(w,null))),E()}},[[15,1,2]]]);
//# sourceMappingURL=main.6f6f78a9.chunk.js.map